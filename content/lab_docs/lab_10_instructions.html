---
title: Instructions for Bottom-Up Decarbonization Policy Analysis
lab_number: 10
lab_date: '2020-03-23'
pubdate: '2019-12-31'
date: '2020-03-23'
pdf_url: /files/lab_docs/decarb_lab_bottom_up/decarb_bottom_up_instructions.pdf
slug: lab_10_instructions
fontsize: 12pt
output:
  blogdown::html_page:
    md_extensions: +tex_math_single_backslash+compact_definition_lists
    toc: yes
  pdf_document:
    md_extensions: +tex_math_single_backslash+compact_definition_lists
    toc: yes
    includes:
      in_header: ees3310.sty
---


<div id="TOC">
<ul>
<li><a href="#introduction">Introduction</a><ul>
<li><a href="#data-resources">Data Resources</a><ul>
<li><a href="#using-the-interactive-web-application">Using the interactive web application:</a></li>
</ul></li>
</ul></li>
<li><a href="#background-and-context">Background and Context</a><ul>
<li><a href="#growth-rates-and-trends">Growth Rates and Trends</a></li>
</ul></li>
<li><a href="#the-assignment">The Assignment</a><ul>
<li><a href="#decarbonization-lab-due-monday-april-13">Decarbonization Lab, due Monday, April 13</a><ul>
<li><a href="#outline">Outline:</a></li>
<li><a href="#detailed-steps">Detailed steps:</a></li>
</ul></li>
</ul></li>
</ul>
</div>

<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>The purpose of this lab is to get a sense of the challenges to cutting
emissions significantly by analyzing several representative emissions-reduction
policies.
These policy analyses will follow the methods Roger Pielke used in
Chapters 3–4 of <em>The Climate Fix</em>.</p>
<p>I encourage you to work with a partner on this lab, but you should write up
your own lab report individually.</p>
<div id="data-resources" class="section level2">
<h2>Data Resources</h2>
<p>To make things simple for you, I have prepared an interactive web application,
available at <a href="https://ees3310.jgilligan.org/decarbonization/" class="uri">https://ees3310.jgilligan.org/decarbonization/</a>, with almost all
the data you will need for this project.
It contains historical data on population, GDP, energy consumption, and
CO<sub>2</sub> emissions for many countries and regions of the world.</p>
<p>I have also provided an R package that you can install on your own computer
through R Studio:</p>
<pre class="r"><code>install.packages(&quot;kayadata&quot;)</code></pre>
<p>Finally, there is an experimental version of the interactive web application
that you can install and run on your computer using RStudio, but it is still
experimental and may not work perfectly.
You can install it in RStudio like this:</p>
<pre class="r"><code>library(pacman)
p_load_gh(&quot;jonathan-g/kayatool&quot;)</code></pre>
<p>and then you can run the application like this:</p>
<pre class="r"><code>library(kayatool)
launch_kayatool()</code></pre>
<p><strong>Note:</strong> you should not put <code>launch_kaya_tool()</code> in RMarkdown documents,
like your lab report, because launching an interactive web application
when you knit your report will prevent the report from knitting correctly.</p>
<div id="using-the-interactive-web-application" class="section level3">
<h3>Using the interactive web application:</h3>
<p>To use the decarbonization web app, start by selecting a country on the
left-hand control panel. Then you can set the parameters for your policy goals:
The target year for accomplishing the emissions reductions, the reductions you
hope to achieve for the country, and the reference year.</p>
<p>For instance, if your
goal is for emissions in 2050 to be
80% less than they were in
2005, you would
put
2050 for the target year,
80% for the emissions reduction,
and 2005 for the reference year.<br />
If you want to indicate a growth in emissions, rather than a reduction,
just enter a negative number for the emissions reduction.</p>
<p>You can also select what year to use for starting the calculation of bottom-up
trends in the Kaya-identity parameters
population <em>P</em>,
per-capita gross-domestic product <em>g</em>,
energy intensity of the economy <em>e</em>,
and carbon intensity of the energy supply <em>f</em>.
When you calculate decarbonization rates in this lab project, you will be
focusing on the carbon intensity of the economy, which is given by the
product <em>ef</em>.</p>
<p>After you have set the parameters you want, the bottom of the left panel will
show a “Bottom-up Analysis” table that shows the average percentage growth
rates for the Kaya parameters, their actual values in 2017, and the bottom-up
projections for what their values will be in the target year (2050 by default).</p>
<p>The tabs on the right-hand side of the web page show:</p>
<ul>
<li><p>“<strong>Trends:</strong>” shows historical trends and the calculated growth rate for the
Kaya parameters. You select a variable (<em>P</em>, <em>g</em>, <em>e</em>, <em>f</em>, or various
multiples <em>ef</em>, <span class="math inline">\(G = Pg\)</span>, <span class="math inline">\(E = Pge\)</span>, or <span class="math inline">\(F = Pgef\)</span>) The app shows two graphs:
on the right, the value of the parameter and on the left,
the natural logarithm of the parameter, which we use to calculate
percentage growth rates.
The graphs show the points that are used in calculating the trends in
darker red and the points not used in the trend calculation in lighter red.
If you change the starting year on the left-hand panel, you will see the
colors of the dots change to reflect this.</p>
<p>The trend is shown in black on the left-hand graph. If the quantity is
changing at a steady rate, the data points will follow a straight line
(the trend line). Sometimes you will see that the variables <em>e</em> and <em>f</em> do
not seem to be changing at a steady rate, but the product <em>ef</em> is.
Explore the trends for the different variables and notice which seem to be
following a steady growth or reduction and which do not.</p>
<p>If you hold the mouse pointer over a data point on either graph, a tool-tip
will pop up showing the value of that variable in that year.</p></li>
<li><p>“<strong>Calculations</strong>” shows the steps for you to follow for the country you have
chosen</p></li>
<li><p>“<strong>Implied Decarbonization</strong>” shows the historical trend in the carbon
intensity of the economy (<em>ef</em>) and the implied future changes in order to
meet the policy goal that you set.</p></li>
<li><p>“<strong>Energy Mix</strong>” shows the mixture of energy sources (coal, natural gas, oil,
nuclear, and renewables) that provide the country or region’s energy supply.
From this page, you can download the energy mix for the country you’re
looking at as a text file, using comma-separated value (csv) format, which
you can read into R, Excel, or any other common data anlysis program.</p></li>
<li><p>“<strong>Historical</strong>” shows a table of historical values for the different Kaya
parameters. This is a convenient place to look up the exact numbers for your
country in a particular year.
This sheet also has a download button that lets you download the data in a
<code>.csv</code> file.</p></li>
</ul>
</div>
</div>
</div>
<div id="background-and-context" class="section level1">
<h1>Background and Context</h1>
<p>The basic framework for your analysis will be the Kaya identity:
<span class="math display">\[
F = P \times g \times e \times f,
\]</span>
where
<em>F</em> is the CO<sub>2</sub> emissions (in million metric tons of carbon per year),
<em>P</em> is the population (in billion people),
<em>g</em> is the per-capita GDP (in thousands of dollars per person per year),
<em>e</em> is the energy intensity of the economy (in quads per trillion dollars of GDP),
and <em>f</em> is the carbon intensity of the energy supply (in million metric tons of
carbon dioxide per quad).<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>
A quad means one quadrillion British thermal units (BTU) of energy.
One quad is approximately equal to 8 billion gallons of gasoline or
36 million tons of coal.
It is roughly equal to the electricity used by
26 million homes in a year,
or the amount of electricity generated by
15 nuclear power plants in a year.</p>
<p>We will also focus on the carbon intensity of the economy (in metric tons of
CO<sub>2</sub> emissions per million dollars of GDP), which
equals <span class="math inline">\(e \times f\)</span>.<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a></p>
<div id="growth-rates-and-trends" class="section level2">
<h2>Growth Rates and Trends</h2>
<p>We will assume that all of the rates of change in the growth and
decarbonization trends we are studying will be constant from year to year.
A constant percentage rate of change implies that the quantity follows
an exponential growth function,
so if you know the values for <em>P</em>, <em>g</em>, <em>e</em>, and <em>f</em> in 2018,
then at some future year <em>y</em>:</p>
<p><span class="math inline">\(\def\lefteqn#1{\rlap{\displaystyle{#1}}}\)</span>
<span class="math display">\[
\begin{aligned}
  P(y) &amp;= P(2018) \times \exp(r_P (y - 2018)),\\
  g(y) &amp;= g(2018) \times \exp(r_g (y - 2018)),\\
  e(y) &amp;= e(2018) \times \exp(r_e (y - 2018)),\\
  \lefteqn{\text{and}}\\
  f(y) &amp;= f(2018) \times \exp(r_f (y - 2018)),\\
\end{aligned}
\]</span>
where <em>r<sub>P</sub></em> is the growth rate of the population, <em>r<sub>g</sub></em> is the growth rate of the per-capita GDP, etc.
Increasing energy efficiency and/or decarbonization of the energy supply mean that <em>r<sub>e</sub></em> and/or <em>r<sub>f</sub></em> are negative.</p>
<hr />
<p><strong>Remember that you have to divide percentages by 100 to get the rates for
these equations: if <em>r</em> is 3%, you use 0.03, not 3.0 in the equations.</strong></p>
<p><strong>In your math classes and on your calculator, you have probably seen the
exponential function exp(<em>x</em>) written as <em>e<sup>x</sup></em>, where <em>e</em> is the base of the
natural logarithm (<em>2.718…</em>).
But since I am using the letter <em>e</em> to represent the energy intensity of the
economy
(the energy consumption divided by the GDP),
I am writing it as exp(<em>x</em>) so you won’t get confused by two different
meanings of “<em>e</em>.” Also, in R the exponential function is <code>exp()</code>.</strong></p>
<hr />
<p>Because of the properties of the exponential function, when you multiply two or
more quantities together, the rate of change of the product is the sum of the
rates of change of each of the quantities:
<span class="math display">\[
\begin{aligned}
  \mathrm{GDP}(y) &amp;= P(y)\times g(y)\\
    &amp;= P(2018) \times \exp(r_p (y - 2018)) 
    \times g(2018) \times \exp(r_g (y - 2018))\\
    &amp;= P(2018)\times g(2018)
    \times \exp((r_P + r_g) (y - 2018))\\
    \lefteqn{\text{so}}\\
  r_{\mathrm{GDP}} &amp;= r_{P\times g} = r_P + r_g.
\end{aligned}
\]</span></p>
<p>The web app does these calculations so you can check your results.
So that errors in the first parts of a problem don’t cascade through the whole
exercise, you should work the problems exercises with RMarkdown and compare
your work to the “Bottom-up Analysis” table to make sure you know how to do it.</p>
</div>
</div>
<div id="the-assignment" class="section level1">
<h1>The Assignment</h1>
<p>For this assignment, analyze the economy and carbon emissions from a country
that you will choose.</p>
<div id="decarbonization-lab-due-monday-april-13" class="section level2">
<h2>Decarbonization Lab, due Monday, April 13</h2>
<p>For this lab, you will choose one of the following countries and
perform a bottom-up analysis of decarbonization policy for that country:
Australia, New Zealand, Canada, China, India, Japan, South Korea, Mexico, Germany, or United Kingdom.</p>
<p>For the bottom-up analysis, use the Kaya Identity to make reasonable
extrapolations of the population and per-capita GDP through 2050.</p>
<div id="outline" class="section level3">
<h3>Outline:</h3>
<p>To analyze the policy for your country:</p>
<ol>
<li>Get the Kaya identity data for the country</li>
<li>Figure out appropriate starting years for calculating the historical trends
for the Kaya variables <em>P</em>, <em>g</em>, <em>e</em>, and <em>f</em>.</li>
<li>Comment on whether you think it’s reasonable to extrapolate the historical
trend.</li>
<li>Calculate the <em>historical trends</em> for the Kaya variables from the starting
year you determined in step (2).</li>
<li>Use the <em>historical trends</em> to extrapolate projected values for <em>P</em>, <em>g</em>,
<em>e</em>, and <em>f</em> in 2050.</li>
<li>Calculate the policy goal for emissions <em>F</em> in 2050.
This uses the policy criteria (target emissions reduction) and the
measured emissions <em>F</em> in 2005, from the Kaya data for your
country.</li>
<li>Calculate the <em>implied rate of change</em> of <em>F</em> between 2018
and 2050, in order to reduce emissions to the policy goal that
you calculated in step (6).</li>
<li>Combine the <em>implied rate of change</em> of <em>F</em> with the <em>historical trends</em> of
<em>P</em> and <em>g</em> to calculate the <em>implied rate of change</em> of <em>ef</em> that you
calculated in step (4) in order to meet the policy goal from step (6).</li>
<li>Compare the <em>implied rate of change</em> of <em>ef</em> that you calculated in step (8)
to the <em>historical trend</em> of <em>ef</em> that you can determine from the
<em>historical trends</em> of <em>e</em> and <em>f</em> that you calculated in step (4).</li>
</ol>
</div>
<div id="detailed-steps" class="section level3">
<h3>Detailed steps:</h3>
<ol>
<li><p>Use the <code>kayadata</code> package in RStudio to load the data for
your country. Below is an example of looking up the data
for the United States:</p>
<pre class="r"><code>library(kayadata)
usa_data = get_kaya_data(&quot;United States&quot;)
latest_year = max(usa_data$year)
usa_current = usa_data %&gt;% filter(year == latest_year)</code></pre>
<p>You can get a list of all the countries and regions that are available
from the function <code>kaya_region_list()</code>.</p></li>
<li><p>Next, go to the “Trends” tab in the interactive application at
<a href="https://ees3310.jgilligan.org/decarbonization" class="uri">https://ees3310.jgilligan.org/decarbonization</a> and look at the graphs of
ln(<em>P</em>), ln(<em>g</em>), ln(<em>e</em>), ln(<em>f</em>), and ln(<em>ef</em>).</p>
<ul>
<li><p>For each graph compare the real data (in red) to the trend line
(the straight blue line).</p></li>
<li><p>Does the trend line look a like a good description of the data?</p></li>
<li><p>Is there a better starting year for calculating trends?
If so, adjust ``Calculate trends starting in’’ to this year.
Make a note of the starting year
(you may use different start years for different variables).</p></li>
<li><p>Do you anticipate a problem if we make policy by assuming that
the Kaya identity variables will follow the trend line for the next
several decades?</p>
<p>You should also plot each variable in your report using RMarkdown.
Following from the example above, you can use the <code>plot_kaya</code> function:</p>
<pre class="r"><code>    plot_kaya(usa_data, &quot;e&quot;, log_scale = TRUE, start_year = 1990, 
              trend_line = TRUE,  trend_color = &quot;red&quot;, font_size = 12)</code></pre>
<p><img src="/lab_docs/lab_10_instructions_files/figure-html/plot_usa_data-1.png" width="672" /></p>
<p>Be sure to set <code>log_scale = TRUE</code> in the <code>plot_kaya</code> function because
a constant percentage rate of
change corresponds to a linear trend in the logarithm of the variable.</p></li>
</ul></li>
<li><p>Examine the plot for each variable.
Does the data (plotted on a logarithmic scale) look like
it’s following a reasonably constant trend for many years? In other words,
do the data lie close to the trend line you plotted?</p>
<p>Would you be confident predicting that the changes over the next 30 years
will continue to follow the trend line in your plot?</p>
<p>Explain why you either are or are not confident in extrapolating the data
using the trend lines in the plots.</p></li>
<li><p>Next, calculate the rates of change of
<em>P</em>, <em>g</em>, <em>e</em>, and <em>f</em> (the Population, per-capita GDP, energy intensity of
the economy, and carbon-intensity of the energy supply) from your starting
year through 2018, using the <code>lm</code> function in R.</p>
<p>A constant rate of change is represented by a linear relationship between
the natural logarithm of the kaya variable and time: for the variable
<code>P</code> (population), we would write this formula in R as <code>log(P)~year</code>.</p>
<p>Here is an example of calculating the rates of change of <em>P</em> and <em>e</em>
(the energy intensity of the economy) for the United States,
using the variable <code>usa_data</code> that you calculated above:</p>
<pre class="r"><code># Load the broom library for organizing lm results
library(broom)
# Load the magrittr library with helper functions for piping data
library(magrittr)

P_trend = usa_data %&gt;% filter(year &gt;= 1980) %&gt;%
  lm(log(P) ~ year, data = .) %&gt;%
  tidy() %&gt;% filter(term == &quot;year&quot;) %$% estimate

# Note that for different variables, I may choose 
# to use different starting years in calculating the 
# trends
e_trend = usa_data %&gt;% filter(year &gt;= 1990) %&gt;%
  lm(log(e) ~ year, data = .) %&gt;%
  tidy() %&gt;% filter(term == &quot;year&quot;) %$% estimate</code></pre>
<p>For more detailed explanation of the code above, see the handout
“New Tools for Data Analysis.”</p>
<p>Here, we find that <code>e_trend</code> = -0.02
(-2% per year).</p>
<p>You can check your results against the interactive web application by
looking at the rates of change reported on the “Trends” tab.
Be sure to set the start year on the web app to the same values that you
used for calculating the slopes in RMarkdown.</p>
<p>These numbers are the slopes of the trend lines that you looked at in part 2.</p></li>
<li><p>Using the rates of change that you determined in the previous step,
use the formulas from the “Growth Rates and Trends” section to predict the
values for
<em>P</em>, <em>g</em>, <em>e</em>, and <em>f</em>
in the year 2050.</p>
<p>Next, use the growth rates of <em>P</em>, <em>g</em>, <em>e</em>, and <em>f</em> to calculate the
growth rate of the total emissions <em>F</em>.
Calculate the total CO<sub>2</sub> emissions (<em>F</em>) from the country in
2050, assuming that emissions continue to grow at
historical rates.</p>
<p>It may also be useful to define functions for frequently used
(e.g., see the example <code>growth</code> function in the handout on “New Tools for
Data Analysis”)</p>
<p>Check your work against the bottom-up numbers in the ``Bottom-Up Analysis’’
table on the bottom of the left-hand pane of the web application.</p></li>
<li><p>Calculate the emissions target for the country you’ve chosen:
Set the reference year for
emissions reduction to 2005, and set the target emissions
reduction using the table below:</p>
<p>The IPCC developed many representative concentration pathways (RCPs)
using a top-down approach, for hitting various targets of radiative forcing
from greenhouse gases. The only RCP that has at least a two-thirds
probability of keeping warming below 2 degrees Celsius is RCP~2.6.
This concentration pathway calls for emissions reductions (relative to 2005)
for different parts of the world listed in the table below:</p>
<table>
<caption>(#tab:rcp_26_table)Percent reduction in CO<sub>2</sub> emissions in 2050, relative to 2005.</caption>
<thead>
<tr class="header">
<th align="left">Country</th>
<th align="right">Target reduction</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Australia</td>
<td align="right">82%</td>
</tr>
<tr class="even">
<td align="left">New Zealand</td>
<td align="right">82%</td>
</tr>
<tr class="odd">
<td align="left">Canada</td>
<td align="right">72%</td>
</tr>
<tr class="even">
<td align="left">China</td>
<td align="right">78%</td>
</tr>
<tr class="odd">
<td align="left">India</td>
<td align="right">73%</td>
</tr>
<tr class="even">
<td align="left">Japan</td>
<td align="right">66%</td>
</tr>
<tr class="odd">
<td align="left">South Korea</td>
<td align="right">67%</td>
</tr>
<tr class="even">
<td align="left">Mexico</td>
<td align="right">40%</td>
</tr>
<tr class="odd">
<td align="left">Germany</td>
<td align="right">74%</td>
</tr>
<tr class="even">
<td align="left">United Kingdom</td>
<td align="right">74%</td>
</tr>
</tbody>
</table>
<p>Set the target year in the web app to 2050;
set the reference year to 2005;
set the emissions reduction to the emissions reduction you are trying to
achieve.</p>
<p>How much CO<sub>2</sub> (<em>F</em>) would the country you’re analyzing emit in
2050 in order to meet its policy goal?</p>
<p>Let’s work an example using Argentina:</p>
<pre class="r"><code>F_2005_argentina = get_kaya_data(&quot;Argentina&quot;) %&gt;% 
  filter(year == 2005) %$% F
F_2005_argentina</code></pre>
<pre><code>## [1] 138.5412</code></pre>
<pre class="r"><code>argentina_reduction = 0.40
F_goal_argentina = F_2005_argentina * (1 - argentina_reduction)
F_goal_argentina</code></pre>
<pre><code>## [1] 83.12471</code></pre>
<p>Check this result against the interactive web application.</p></li>
<li><p>Look up what the CO<sub>2</sub> emission is in 2018 and calculate the
rate of change in <em>F</em> that would be necessary to achieve your policy target.
For the 2050 calculation:</p>
<ol style="list-style-type: lower-alpha">
<li>Calculate the ratio of <span class="math inline">\(F_{2050}/F_{2018}\)</span>.</li>
<li>Take the natural logarithm of this ratio
(in R, the natural logarithm function is <code>log()</code>; on your calculator
it is “LN”).</li>
<li>Divide the logarithm by the number of years
(<span class="math inline">\(2050 - 2018\)</span>).
This is the rate of change of <em>F</em>. A positive number means growth and a
negative number means a reduction.
The percentage rate of change per year is 100 times this number.</li>
</ol>
<p>For our Argentina example:</p>
<pre class="r"><code>F_2017_argentina = get_kaya_data(&quot;Argentina&quot;) %&gt;% 
  filter(year == 2017) %$% F
r_F_argentina = log(F_goal_argentina / F_2017_argentina) / (2050 - 2017)
r_F_argentina</code></pre>
<pre><code>## [1] -0.0241004</code></pre>
<p>so total emissions for the Argentina would need to drop by
-2.41% per year between 2018
and 2050</p></li>
<li><p>Now calculate the decarbonization rate implied by the policy goal. This is
the rate of reduction of <em>ef</em>, the carbon intensity of the economy.
<span class="math inline">\(F = Pgef\)</span>, so <span class="math inline">\(r_F = r_P + r_g + r_e + r_f\)</span>. Subtract the projected <em>r<sub>P</sub></em>
and <em>r<sub>g</sub></em>
(look them up in the ``Bottom up Analysis’’ table)
from <em>r<sub>F</sub></em>, which you just calculated in step~7,
to get the rate of change of <em>ef</em>.</p>
<p>The rate of decarbonization has the opposite sign to the rate of change of
<em>ef</em>: If the economy is decarbonizing by 20% per year, that means that the
rate of change of <em>ef</em> is <span class="math inline">\(-0.20\)</span>.</p>
<p>Multiply the rate of change of <em>ef</em> by -1 to get the rate of decarbonization
and multiply by 100 to express it as a percentage change per year.</p></li>
<li><p>How does the implied rate of change of <em>ef</em> for the country you’re analyzing
compare to the
historical rate (i.e., the trend in <em>ef</em> reported in the
“Bottom up Analysis” table)?
Do you think your country will have a hard time meeting its emission goal
without damaging its economy?</p></li>
</ol>
</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>One metric ton = 1000 kg = 1.1 English tons = 2200 pounds<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>Note that <em>e</em> is in units of quads per trillion dollars
of GDP and <em>f</em> is in units of million metric tons of CO<sub>2</sub> per quad,
so if you multiply the units you get million metric tons of CO<sub>2</sub> per
trillion dollars of GDP, which equals metric tons of CO<sub>2</sub> per
million dollars of GDP.<a href="#fnref2" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
